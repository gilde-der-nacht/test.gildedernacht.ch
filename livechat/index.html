<!doctype html><html lang=de>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<title>Gilde der Nacht | Live Chat</title>
<meta name=generator content="Hugo 0.91.0">
<link rel=stylesheet href=/sass/main.394f4d57bc85e02d9273cd7a566322daa79ede19ed7c478997807553fa29005c.css media=screen integrity="sha256-OU9NV7yF4C2Sc816VmMi2qee3hntfEeJl4B1U/opAFw=">
</head>
<body>
<header>
<div id=p-meta-nav>
<div class=o-outer-container>
<div id=p-site-switcher class=brand-icon>
<a href=/>
<object type=image/svg+xml data=/images/branding/logo.svg height=40>
Gilde der Nacht
</object>
</a>
</div>
<div id=p-language>
<ul>
<li>
Deutsch
</li>
</ul>
</div>
</div>
</div>
<div id=p-page-nav>
<div class=o-outer-container>
<div id=p-site-brand>
<a href=/>
<object type=image/svg+xml data=/images/branding/wordmark.svg height=40>
Gilde der Nacht
</object>
</a>
</div>
<input type=checkbox id=p-site-nav-toggle>
<nav id=p-site-nav>
<ul>
<li>
<a href=/>Startseite</a>
</li>
<li>
<a href=/events/>Anlässe</a>
</li>
<li>
<a href=/verein/>Verein</a>
</li>
<li>
<a href=/kontakt/>Kontakt</a>
</li>
</ul>
</nav>
<label for=p-site-nav-toggle id=p-site-nav-toggle-label>
<span></span>
</label>
</div>
</div>
</header>
<div class="c-jumbotron o-outer-container">
<h1>Live Chat</h1>
</div>
<main class=o-inner-container>
<p>Hier kannst du dich direkt mit uns austauschen.</p>
<p>Sollte innert weniger Minuten niemand antworten, ist wohl niemand von uns online. Sende uns in diesem Fall eine Nachricht per <a href=https://test.gildedernacht.ch/kontakt/>Kontaktformular</a>.</p>
<h2>Nachrichtenverlauf</h2>
<ul id=hermes-history>
<li class=hermes-message-type-placeholder>
<p>Bisher keine Nachrichten</p>
</li>
</ul>
<div class=c-form>
<h2>Nachricht erfassen</h2>
<form action=#>
<p class="c-form--item c-form-field--text">
<label for=hermes-author>Wähle dein Anzeigenamen *</label>
<input id=hermes-author name=hermes-author type=text required>
</p>
<p class="c-form--item c-form-field--text">
<label for=hermes-send>Deine Nachricht *</label>
<input id=hermes-send name=hermes-send type=text required>
</p>
</form>
</div>
<script>const language='de',authorInput=document.getElementById("hermes-author"),messageInput=document.getElementById("hermes-send"),messageHistory=[];function randomFromTo(a,b){return Math.floor(Math.random()*(b-a+1))+a}function randomElement(a){const b=Math.floor(Math.random()*a.length);return a[b]}function updateUi(){const a=document.getElementById("hermes-history");a.innerHTML="";for({subType,isMyMessage,author,text}of messageHistory){const b=document.createElement("li");b.classList.add("hermes-message-type-"+subType),isMyMessage&&b.classList.add("hermes-my-message");const d=document.createElement("p");d.textContent=author+": ",b.appendChild(d);const c=document.createElement("p");if(subType==="connected"){const a=language==="en"?"Live chat has been started.":"Live Chat wurde gestartet.";c.textContent=a}else if(subType==="disconnected"){const a=language==="en"?"Live chat was terminated.":"Live Chat wurde beendet.";c.textContent=a}else c.textContent=text;b.appendChild(c),a.appendChild(b)}}function onMessage(b){const a=JSON.parse(b.data);if(a.type==="text"){const b=a.author==="Hermes",c=b&&a.text.includes(authorInput.value);messageHistory.push({...a,isMyMessage:c,subType:a.text.includes("Connected")?"connected":a.text.includes("Disconnected")?"disconnected":"message",author:c?document.getElementById("hermes-author").value:b?a.text.match(/\*\*(.+)\*\*/)[1]:a.author,text:b?a.text.match(/: (.+)/)[1]:a.text}),updateUi()}}function onError(a){console.error(JSON.stringify(a))}function wsCreate(b){const a=new WebSocket(b);return a.addEventListener("message",onMessage),a.addEventListener("error",onError),a}function wsWaitForOpen(a){return new Promise(b=>a.addEventListener("open",b))}function wsSend(a,b){const c=JSON.stringify(b);a.send(c)}async function main(){const a=wsCreate("wss://tartaros.gildedernacht.ch/ws"),d="274123519502319617",e="849204844672974869";await wsWaitForOpen(a),wsSend(a,{type:"ping"});const c=document.getElementById("hermes-author"),f={de:["Aphrodite","Apollon","Ares","Athena","Kronos","Demeter","Dionysos","Gaia","Hades","Hephaistos","Hera","Hestia","Iris","Nyx","Poseidon","Prometheus","Selene","Tyche","Zeus"],en:["Aphrodite","Apollo","Ares","Athena","Cronos","Demeter","Dionysus","Gaea","Hades","Hephaestus","Hera","Hestia","Iris","Nyx","Poseidon","Prometheus","Selene","Tyche","Zeus"]};c.value=randomElement(f[language])+randomFromTo(10,99);const b=document.getElementById("hermes-send");b.value="",b.focus(),b.addEventListener("keypress",b=>{b.key==="Enter"&&(b.preventDefault(),wsSend(a,{type:"text",channelid:e,connectedMsg:"**"+authorInput.value+"**: _Connected_",disconnectedMsg:"**"+authorInput.value+"**: _Disconnected_",author:c.value,guildid:d,text:"**"+authorInput.value+"**: "+messageInput.value+"\n["+window.location.toLocaleString()+"]"}),messageInput.value="")})}window.addEventListener("load",main)</script>
</main>
<footer>
<section class=p-contact>
<div class=o-outer-container>
<div class=p-social>
<div class=p-social-logo>
<a href=https://discord.gg/G7mkTTB>
<img src=/images/Discord-Logo+Wordmark-White.svg alt=Discord>
</a>
</div>
</div>
</div>
</section>
</footer>
</body>
</html>